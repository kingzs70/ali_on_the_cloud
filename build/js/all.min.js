var Brav1Toolbox=function(){function e(e,t,n,a){e.addEventListener?e.addEventListener(t,n,a):e.attachEvent&&e.attachEvent(t,n)}function t(e){return""!=n(e)}function n(e){for(var t=0;t<d.length;t++){var n=d[t].replace(/-/g,""),a=e;if(n.length>0&&(a=a.charAt(0).toUpperCase()+a.substr(1)),a=n+a,a in l==1)return a}return""}function a(e){return!!e&&Object.prototype.toString.call(e).match(/(\w+)\]/)[1]}function s(e,t){if(e.classList)e.classList.add(t);else if(0==c(e,t)){var n=e.className;n.length>0&&(n+=" "),e.className=n+t}}function r(e,t){if(e.classList)e.classList.remove(t);else{var n=e.className;-1!=n.indexOf(t)&&(n=-1!=n.indexOf(" "+t)?n.replace(" "+t,""):-1!=n.indexOf(t+" ")?n.replace(t+" ",""):n.replace(t,"")),e.className=n}}function c(e,t){if(e){if(e.classList)return e.classList.contains(t);if(e.className)return-1!=e.className.indexOf(t)}return!1}function i(e,t){if(document.createEvent){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0);for(var a in t)n[a]=t[a];document.dispatchEvent(n)}}function o(e,t){var n,a;return n=t.x-e.x,n*=n,a=t.y-e.y,a*=a,Math.abs(Math.sqrt(n+a))}var l,d=["","-webkit-","-moz-","-ms-","-o-"];return l=window.getComputedStyle?window.getComputedStyle(document.body):document.documentElement.style,{addListener:e,dispatchEvent:i,testCSS:t,getPrefixed:n,typeOf:a,addClass:s,removeClass:r,hasClass:c,distance:o}}();
var Flowtime=function(){function e(e){var t=e.target.getAttribute("href");if(t&&"#"==t.substr(0,1)){e.target.blur(),e.preventDefault();var n=t,a=Ye.setPage(n);h(a,!0,!0)}if(Ce){for(var a=e.target;a&&!Brav1Toolbox.hasClass(a,re);)a=a.parentNode;Brav1Toolbox.hasClass(a,re)&&(e.preventDefault(),h(a,null,!0))}if(Brav1Toolbox.hasClass(e.target,fe)){e.preventDefault();var r=Number(v(e.target.getAttribute("data-section"))),o=Number(v(e.target.getAttribute("data-page")));F(r,o)}}function t(e){me=!1;var t;t=e.state?e.state.token.replace("#/",""):document.location.hash.replace("#/","");var n=Ye.setPage(t);h(n,!1)}function n(e,t){if(me||t){var n=document.location.hash.replace("#/",""),a=Ye.setPage(n);h(a,!1)}}function a(e){Ve=0,je=0,e.preventDefault(),e=i(e),Re=e.clientX,Ue=e.clientY,ze=1;var t=l();He=t.x,Ke=t.y}function r(e){e.preventDefault(),e=i(e),Ve=e.clientX-Re,je=e.clientY-Ue}function o(e){if(e=i(e),ze=0,We=Math.abs(Ve)>=Math.abs(je)?"x":"y","x"==We&&Math.abs(Ve)>=Ge){if(Ve>0)return void E();if(0>Ve)return void q()}else{if(je>0&&Math.abs(je)>=Ge)return void k();if(0>je)return void O()}}function i(e){return e.touches&&(e=e.touches[0]),e}function l(){var e=xe.style[Brav1Toolbox.getPrefixed("transform")],t=e.indexOf("translateX(")+11,n=e.substring(t,e.indexOf(")",t));-1!=n.indexOf("%")?(n=n.replace("%",""),n=parseInt(n)/100*window.innerWidth):-1!=n.indexOf("px")&&(n=parseInt(n.replace("px","")));var a=e.indexOf("translateY(")+11,r=e.substring(a,e.indexOf(")",a));return-1!=r.indexOf("%")?(r=r.replace("%",""),r=parseInt(r)/100*window.innerHeight):-1!=r.indexOf("px")&&(r=parseInt(r.replace("px",""))),{x:n,y:r}}function u(e){e.preventDefault(),m()}function s(e){if(e.length>0){var t=e.replace("#/","").split("/"),n=document.querySelector(ae+"[data-id=__"+t[0]+"]")||document.querySelector(ae+"[data-prog=__"+t[0]+"]");if(null!=n){var a=null;return t.length>1&&(a=n.querySelector(oe+"[data-id=__"+t[1]+"]")||n.querySelector(oe+"[data-prog=__"+t[1]+"]")),null==a&&(a=n.querySelector(oe)),a}}}function g(){Ye.update(),n(null,!0)}function c(e){var t=Se,n=Ye.getCurrentPage().getAttribute("data-title");if(null==n)for(var a=e.split("/"),r=0;r<a.length;r++)t+=" | "+a[r];else null!=Ye.getCurrentSection().getAttribute("data-title")&&(t+=" | "+Ye.getCurrentSection().getAttribute("data-title")),t+=" | "+n;document.title=t}function d(e){return null!=e.getAttribute("data-id")?e.getAttribute("data-id").replace(/__/,""):e.getAttribute("data-prog").replace(/__/,"")}function f(e){return"__"!=e.substr(0,2)?"__"+e:e}function v(e){return"__"==e.substr(0,2)?e.replace(/__/,""):e}function h(e,t,n){t=0==t?t:!0,e||(e=null!=Ye.getCurrentPage()?Ye.getCurrentPage():document.querySelector(oe),t=!0),p(e),b(e),Ce&&y(!1,!1);var a=Ye.getHash(e);1==n&&Ye.updateFragments();var r=Ye.getPageIndex(e);if(Te.section!=r.section||Te.page!=r.page)if(null!=te&&0!=t&&-1==Ye.getCurrentFragmentIndex()){var o={token:a},i="#/"+a;Pe=i,window.history.pushState(o,null,Pe)}else document.location.hash="/"+a;c(a),x(),Te=r,Ye.switchActivePage(e,!0),qe&&C()}function x(){var e=Ye.getPageIndex();Brav1Toolbox.dispatchEvent(he,{section:Ye.getCurrentSection(),page:Ye.getCurrentPage(),sectionIndex:e.section,pageIndex:e.page,pastSectionIndex:Te.section,pastPageIndex:Te.page,prevSection:Ye.hasPrevSection(),nextSection:Ye.hasNextSection(),prevPage:Ye.hasPrevPage(),nextPage:Ye.hasNextPage(),fragment:Ye.getCurrentFragment(),fragmentIndex:Ye.getCurrentFragmentIndex(),isOverview:Ce,progress:Ye.getProgress(),total:Ye.getPagesTotalLength()})}function p(e){var t,n,a=Ye.getPageIndex(e);1==_e?(t=e.x,n=e.y):(t=a.section,n=a.page),Brav1Toolbox.testCSS("transform")?xe.style[Brav1Toolbox.getPrefixed("transform")]=_e?"translateX("+-t+"px) translateY("+-n+"px)":"translateX("+100*-t+"%) translateY("+100*-n+"%)":_e?(xe.style.top=-n+"px",xe.style.left=-t+"px"):(xe.style.top=100*-n+"%",xe.style.left=100*-t+"%"),m()}function b(e){if(Fe)for(var t=Ye.getPageIndex(e),n=Ye.getParallaxElements(),a=0;a<n.length;a++){var r=n[a];if(void 0!=r)for(var o=0;o<r.length;o++){var i=r[o];if(void 0!=i)for(var l=0;l<i.length;l++){var u=i[l],s=0,g=0;t.section<a?s=u.pX:t.section>a&&(s=-u.pX),t.page<o?g=u.pY:t.page>o&&(g=-u.pY),u.style[Brav1Toolbox.getPrefixed("transform")]=Ee?"translateX("+s+"px) translateY("+g+"px)":"translateX("+s+"%) translateY("+g+"%)"}}}}function m(){window.scrollTo(0,0)}function P(){var e=document.createDocumentFragment();Be=document.createElement("div"),Be.className=ce,e.appendChild(Be);for(var t=0;t<Ye.getSectionsLength();t++){var n=document.createElement("div");n.setAttribute("data-section","__"+t),n.className=de,Brav1Toolbox.addClass(n,"thumb-section-"+t);for(var a=Ye.getPages(t),r=0;r<a.length;r++){var o=document.createElement("div");o.className=fe,o.setAttribute("data-section","__"+t),o.setAttribute("data-page","__"+r),Brav1Toolbox.addClass(o,"thumb-page-"+r),n.appendChild(o)}Be.appendChild(n)}be.appendChild(Be)}function T(){null!=Be&&(be.removeChild(Be),Be=null)}function C(){if(null!=Be)for(var e=Be.querySelectorAll(ve),t=0;t<e.length;t++){var n=e[t],a=Number(v(n.getAttribute("data-section"))),r=Number(v(n.getAttribute("data-page")));a==Ye.getPageIndex().section&&r==Ye.getPageIndex().page?Brav1Toolbox.addClass(e[t],"actual"):Brav1Toolbox.removeClass(e[t],"actual")}}function S(){return Be}function y(e,t){Ce?B(e,t):($=Ye.getCurrentPage(),w())}function B(e,t){Ce=!1,Brav1Toolbox.removeClass(be,"ft-overview"),Ye.hideFragments(),t=t===!1?!1:!0,1==t&&(1==e?h($):h())}function w(){Ce=!0,Brav1Toolbox.addClass(be,"ft-overview"),Ye.showFragments(),0==Ne?A(!0):_(!0),x()}function A(e){if(e){var t=100/Ye.getSectionsLength(),n=100/Ye.getPagesLength(),a=.9*Math.min(t,n),r=(100-Ye.getSectionsLength()*a)/2,o=(100-Ye.getPagesLength()*a)/2;xe.style[Brav1Toolbox.getPrefixed("transform")]="translate("+r+"%, "+o+"%) scale("+a/100+", "+a/100+")"}}function _(e){if(e){var t=ye,n=Ye.getPageIndex(),a=50-t*n.section-t/2,r=50-t*n.page-t/2;xe.style[Brav1Toolbox.getPrefixed("transform")]="translate("+a+"%, "+r+"%) scale("+t/100+", "+t/100+")"}}function I(e){var t=e.target.tagName;"INPUT"!=t&&"TEXTAREA"!=t&&"SELECT"!=t&&e.keyCode>=37&&e.keyCode<=40&&e.preventDefault()}function N(e){var t=e.target.tagName;if("INPUT"!=t&&"TEXTAREA"!=t&&"SELECT"!=t)switch(e.preventDefault(),e.keyCode){case 27:y(!0);break;case 33:M();break;case 34:Y();break;case 35:D();break;case 36:X();break;case 37:E(e.shiftKey);break;case 39:q(e.shiftKey);break;case 38:k(e.shiftKey);break;case 40:O(e.shiftKey);break;case 13:Ce&&F(Ye.getCurrentHilited())}}function L(){qe&&null==Be&&P(),document.location.hash.length>0?(Brav1Toolbox.addClass(xe,"no-transition"),n(null,!0),Brav1Toolbox.removeClass(xe,"no-transition")):L.arguments.length>0?F.apply(this,L.arguments):(F(0,0),C())}function q(e){var t=Ye.getNextSection(e,we,Ce);void 0!=t?h(t):Ce&&Ne&&w()}function E(e){var t=Ye.getPrevSection(e,we,Ce);void 0!=t?h(t):Ce&&Ne&&w()}function O(e){var t=Ye.getNextPage(e,Ce);void 0!=t?h(t):Ce&&Ne&&w()}function k(e){var t=Ye.getPrevPage(e,Ce);void 0!=t?h(t):Ce&&Ne&&w()}function F(){var e=F.arguments;if(e.length>0){if(1==e.length)if("Object"===Brav1Toolbox.typeOf(e[0])){var t=e[0],n=t.section,a=t.page;if(null!=n&&void 0!=n){var r=document.querySelector(ae+"[data-id="+f(n)+"]");if(null!=a&&void 0!=a){var o=r.querySelector(oe+"[data-id="+f(a)+"]");if(null!=o)return void h(o)}}}else void 0!=e[0].nodeName&&h(e[0],null,!0);if("Number"===Brav1Toolbox.typeOf(e[0])||0===e[0]){var o=Ye.getPageByIndex(e[1],e[0]);return void h(o)}}}function X(){F(0,0)}function D(){var e=Ye.getSectionsLength()-1;F(e,Ye.getPages(e).length-1)}function M(){var e=Ye.getPageIndex();F(e.section,0)}function Y(){var e=Ye.getPageIndex();F(e.section,Ye.getPages(e.section).length-1)}function H(e,t,n){Brav1Toolbox.addListener(document,e,t,n)}function K(e){we=e,R(e)}function R(e){Ae=e}function U(e){te=e}function V(e){_e=e,h()}function j(e){Ie=e}function z(e){Ie=!e}function W(e){Ne=e}function G(e){Le=e}function J(e){qe=e,qe?(null==Be&&P(),C()):null!=Be&&T()}function Q(e,t){Oe=e,ke=void 0==t?Oe:t,Ye.update()}function Z(e){Ee=e}var $,ee="ontouchstart"in document.documentElement,te=window.history.pushState,ne="ft-section",ae="."+ne,re="ft-page",oe="."+re,ie="ft-fragment",le="."+ie,ue="revealed",se="actual",ge="revealed-temp",ce="ft-default-progress",de="ft-section-thumb",fe="ft-page-thumb",ve="."+fe,he="flowtimenavigation",xe=document.querySelector(".flowtime"),pe=document.querySelector("html"),be=document.querySelector("body"),me=!1,Pe="",Te={section:0,page:0},Ce=!1,Se=document.title,ye=22,Be=null,we=!1,Ae=!0,_e=!1,Ie=!1,Ne=!1,Le=!1,qe=!1,Ee=!1,Oe=50,ke=50,Fe=null!=document.querySelector(".parallax"),Xe=!0;try{var De=document.querySelector("html").className.toLowerCase();(-1!=De.indexOf("ie7")||-1!=De.indexOf("ie8")||-1!=De.indexOf("lt-ie9"))&&(Xe=!1)}catch(Me){Xe=!1}Xe&&Brav1Toolbox.addClass(be,"ft-absolute-nav");var Ye=function(){function e(){V=[],Q=[],z=document.querySelectorAll(le),W=[],U=xe.querySelectorAll(".flowtime > "+ae),j=xe.querySelectorAll(".flowtime "+oe);for(var e=0;e<U.length;e++){var n=[],r=U[e];W[e]=[],J[e]=[],r.getAttribute("data-id")&&r.setAttribute("data-id","__"+v(r.getAttribute("data-id"))),r.setAttribute("data-prog","__"+(e+1)),r.index=e,r.setAttribute("id",""),pages=r.querySelectorAll(oe),ee+=pages.length,$=Math.max($,pages.length);for(var o=0;o<pages.length;o++){var i=pages[o];if(i.getAttribute("data-id")&&i.setAttribute("data-id","__"+v(i.getAttribute("data-id"))),i.setAttribute("data-prog","__"+(o+1)),i.index=o,i.setAttribute("id",""),!i.getAttribute("data-title")){var l=i.querySelector("h1");null!=l&&""!=l.textContent.lenght&&i.setAttribute("data-title",l.textContent)}t(i,e,o),n.push(i);var u=i.querySelectorAll(le);W[e][o]=u,J[e][o]=-1}V.push(n)}Z=U.length,m(),a()}function t(e,t,n){if(Fe){void 0==Q[t]&&(Q[t]=[]),void 0==Q[t][n]&&(Q[t][n]=[]);var a=e.querySelectorAll(".parallax");if(a.length>0)for(var r=0;r<a.length;r++){var o=a[r],i=Oe,l=ke;if(null!=o.getAttribute("data-parallax")){var u=o.getAttribute("data-parallax").split(",");i=l=u[0],u.length>1&&(l=u[1])}o.pX=i,o.pY=l,Q[t][n].push(o)}}}function n(){return Q}function a(){for(var e=0;e<j.length;e++){var t=j[e];t.x=t.offsetLeft+t.parentNode.offsetLeft,t.y=t.offsetTop+t.parentNode.offsetTop}}function r(e,t,n){var a=ne,r=e==!Ie;return 1==t&&W[te][ne].length>0&&J[te][ne]<W[te][ne].length-1&&1!=r&&0==n?(c(te,ne),g(V[te][ne],n)):(a=0,1==r&&te+1<V.length-1?a=0:(1!=r||1==Ae||te+1>V.length-1)&&(a=ne),te=Math.min(te+1,V.length-1),i(V[te],a,n))}function o(e,t,n){var a=ne,r=e==!Ie;if(!(1==t&&W[te][ne].length>0&&J[te][ne]>=0&&1!=r&&0==n)){var a=0;return a=0,1==r&&te-1>=0?a=0:(1!=r||1==Ae||0>te-1)&&(a=ne),te=Math.max(te-1,0),i(V[te],a,n)}return f(te,ne),g(V[te][ne],n)}function i(e,t,n){var a=e[t];if(void 0==a)for(var r=t;r>=0;r--)if(void 0!=e[r]){a=e[r],t=r;break}return ne=t,Ce||p(),g(a,n)}function l(e,t){return W[te][ne].length>0&&J[te][ne]<W[te][ne].length-1&&1!=e&&0==t?c(te,ne):void 0==V[te][ne+1]&&void 0!=V[te+1]?(te+=1,ne=0):ne=Math.min(ne+1,V[te].length-1),g(V[te][ne],t)}function u(e,t){return W[te][ne].length>0&&J[te][ne]>=0&&1!=e&&0==t?f(te,ne):0==ne&&void 0!=V[te-1]?(te-=1,ne=V[te].length-1):ne=Math.max(ne-1,0),g(V[te][ne],t)}function g(e,t){return 1==t?void H(e):e}function c(e,t,n){void 0!=n?J[e][t]=n:n=J[e][t]+=1;for(var a=0;n>=a;a++)Brav1Toolbox.addClass(W[e][t][a],ue),Brav1Toolbox.removeClass(W[e][t][a],se);Brav1Toolbox.addClass(W[e][t][n],se)}function f(e,t,n){void 0!=n?J[e][t]=n:n=J[e][t];for(var a=0;a<W[e][t].length;a++)a>=n&&(Brav1Toolbox.removeClass(W[e][t][a],ue),Brav1Toolbox.removeClass(W[e][t][a],ge)),Brav1Toolbox.removeClass(W[e][t][a],se);n-=1,n>=0&&Brav1Toolbox.addClass(W[e][t][n],se),J[e][t]=n}function h(){for(var e=0;e<z.length;e++)Brav1Toolbox.addClass(z[e],ge)}function x(){for(var e=0;e<z.length;e++)Brav1Toolbox.removeClass(z[e],ge)}function p(){for(var e=0;e<W.length;e++)for(var t=W[e],n=0;n<t.length;n++){var a=t[n];if(a.length>0)if(e>te)for(var r=a.length-1;r>=0;r--)f(e,n,r);else if(te>e)for(var r=0;r<a.length;r++)c(e,n,r);else if(e==te)if(n>ne)for(var r=a.length-1;r>=0;r--)f(e,n,r);else if(ne>n)for(var r=0;r<a.length;r++)c(e,n,r);else if(n==ne){if(1==Ae&&(Te.section>Ye.getPageIndex().section||Te.page>Ye.getPageIndex().page))for(var r=0;r<a.length;r++)c(e,n,r);else for(var r=a.length-1;r>=0;r--)f(e,n,r);J[e][n]=0==Ae?-1:Te.section>Ye.getPageIndex().section||Te.page>Ye.getPageIndex().page?a.length-1:-1}}}function b(e){return te}function P(e){return ne}function T(){return U}function C(e){return V[e]}function S(){return j}function y(){return Z}function B(){return $}function w(){return ee}function A(e){var t=te,n=ne;return void 0!=e&&(t=e.parentNode.index,n=e.index),{section:t,page:n}}function _(e){return U[e]}function I(e,t){return V[t][e]}function N(){return U[te]}function L(){return V[te][ne]}function q(){return W[te][ne][E()]}function E(){return J[te][ne]}function O(){return te<U.length-1}function k(){return te>0}function F(){return ne<V[te].length-1}function X(){return ne>0}function D(){if(0==te&&0==ne)return 0;for(var e=0,t=0;te>t;t++)e+=V[t].length;return e+=V[te][ne].index+1}function M(e){void 0!=e&&(ne=A(e).page,te=A(e).section);var t="",n=U[te];if(t+=d(n),V[te].length>1){var a=V[te][ne];t+="/"+d(a)}return t}function Y(e){var t=s(e);if(t){for(var n=t.parentNode,a=0;a<V.length;a++){var r=V[a];if(U[a]===n){te=a;for(var o=0;o<r.length;o++)if(r[o]===t){ne=o;break}}}p()}return t}function H(e,t){for(var n=e.parentNode.index,a=0;a<V.length;a++)for(var r=V[a],o=0;o<r.length;o++){var i=r[o];Brav1Toolbox.removeClass(i,"past-section"),Brav1Toolbox.removeClass(i,"future-section"),Brav1Toolbox.removeClass(i,"past-page"),Brav1Toolbox.removeClass(i,"future-page"),i!==e&&(Brav1Toolbox.removeClass(i,"hilite"),0==Ce&&i!==L()&&Brav1Toolbox.removeClass(i,"actual"),n>a?Brav1Toolbox.addClass(i,"past-section"):a>n&&Brav1Toolbox.addClass(i,"future-section"),i.index<e.index?Brav1Toolbox.addClass(i,"past-page"):i.index>e.index&&Brav1Toolbox.addClass(i,"future-page"))}Brav1Toolbox.addClass(e,"hilite"),t&&R(e),G=e}function K(){return G}function R(e){Brav1Toolbox.addClass(e,"actual")}var U,V,j,z,W,G,J=[],Q=[],Z=0,$=0,ee=0,te=0,ne=0;return e(),{update:e,updateFragments:p,showFragments:h,hideFragments:x,getSection:b,getPage:P,getSections:T,getPages:C,getAllPages:S,getNextSection:r,getPrevSection:o,getNextPage:l,getPrevPage:u,getSectionsLength:y,getPagesLength:B,getPagesTotalLength:w,getPageIndex:A,getSectionByIndex:_,getPageByIndex:I,getCurrentSection:N,getCurrentPage:L,getCurrentFragment:q,getCurrentFragmentIndex:E,getProgress:D,getHash:M,setPage:Y,switchActivePage:H,getCurrentHilited:K,hasNextSection:O,hasPrevSection:k,hasNextPage:F,hasPrevPage:X,updateOffsets:a,getParallaxElements:n}}();Xe&&(ee?Brav1Toolbox.addListener(document,"touchend",e,!1):Brav1Toolbox.addListener(document,"click",e,!1)),0==me&&window.history.pushState?window.onpopstate=t:me=!0,Brav1Toolbox.addListener(window,"hashchange",n);var He=xe.offsetX,Ke=0,Re=0,Ue=0,Ve=0,je=0,ze=0,We="x",Ge=100;pe.addEventListener("touchstart",a,!1),pe.addEventListener("touchmove",r,!1),pe.addEventListener("touchend",o,!1);Brav1Toolbox.addListener(window,"scroll",u);var Be=(function(){function e(){t(),Ce||(a=setTimeout(n,300))}function t(){clearTimeout(a)}function n(){Ye.updateOffsets(),h()}var a=0/0;return Brav1Toolbox.addListener(window,"resize",e),window.addEventListener("orientationchange",e,!1),{enable:e,disable:t}}(),null);return Brav1Toolbox.addListener(window,"keydown",I),Brav1Toolbox.addListener(window,"keyup",N),{start:L,updateNavigation:g,nextSection:q,prevSection:E,next:O,prev:k,nextFragment:O,prevFragment:k,gotoPage:F,gotoHome:X,gotoTop:M,gotoBottom:Y,gotoEnd:D,toggleOverview:y,fragmentsOnSide:K,fragmentsOnBack:R,useHistory:U,slideInPx:V,sectionsSlideToTop:j,gridNavigation:z,useOverviewVariant:W,twoStepsSlide:G,showProgress:J,addEventListener:H,defaultParallaxValues:Q,parallaxInPx:Z,getDefaultProgress:S}}();